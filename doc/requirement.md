# Flutter Rich Text Editor 위젯 개발 요구사항 명세서

## 1. 개요

본 문서는 Flutter 기반의 리치 텍스트 에디터(Rich Text Editor) 위젯 개발에 필요한 요구사항을 정의합니다. 본 위젯은 텍스트의 부분적인 스타일 변경 기능을 핵심으로 하며, 편집 및 뷰 모드를 지원하고, 외부에서 데이터를 제어할 수 있는 유연한 구조를 가집니다.

- **프로젝트 목표**: Flutter 환경에서 재사용 가능한 고기능성 리치 텍스트 에디터 위젯 개발
- **핵심 기능**:
    - 부분 텍스트 속성(폰트, 색상, 크기 등) 변경
    - 편집 모드와 뷰 모드 전환
    - 편집 내용을 JSON 형식으로 외부와 연동

---

## 2. 기능 요구사항

### 2.1. 텍스트 편집 기본 기능
- `REQ-FUN-001`: **한글 지원**: 한글 입력, 수정, 삭제가 원활하게 이루어져야 합니다.
- `REQ-FUN-002`: **멀티라인 편집**: 여러 줄의 텍스트를 입력하고 편집할 수 있어야 합니다.

### 2.2. 텍스트 스타일링
- `REQ-FUN-003`: **부분 스타일링**: 마우스나 터치로 텍스트의 특정 부분을 선택하여 개별적인 스타일을 적용할 수 있어야 합니다.
- `REQ-FUN-004`: **동적 폰트 리스트**: 위젯 외부에서 인수로 받은 폰트 리스트를 UI에 표시하고, 사용자가 선택하여 텍스트에 적용할 수 있어야 합니다.
- `REQ-FUN-005`: **스타일 속성 변경**: 다음의 속성들을 변경할 수 있는 UI와 기능이 제공되어야 합니다.
    - **폰트 종류**: `REQ-FUN-004`에 따라 제공된 폰트
    - **사이즈**: 글자 크기
    - **색상**: 글자 색상
    - **그림자**: 텍스트 그림자 효과 (색상, offset, blur)
    - **외곽선**: 텍스트 외곽선 (색상, 두께)
    - **밑줄**: 밑줄 표시
    - **이탤릭**: 이탤릭체(기울임꼴)
    - **장평**: 글자 간격(letter spacing)
    - **라인 간격**: 줄 간격(line height)
    - **정렬**: 문단의 좌/우/중앙 및 상/하/중앙 정렬

### 2.3. 위젯 모드 관리
- `REQ-FUN-006`: **편집/뷰 모드**: 위젯은 '편집 모드'와 '뷰 모드' 두 가지 상태를 가집니다.
- `REQ-FUN-007`: **모드 전환**: 토글 버튼을 통해 사용자가 '편집 모드'와 '뷰 모드'를 전환할 수 있어야 합니다.
- `REQ-FUN-008`: **뷰 모드 제한**: '뷰 모드'에서는 텍스트 편집이 불가능하며, 스타일 변경을 위한 편집 도구들이 보이지 않아야 합니다.

### 2.4. 위젯 외형 및 레이아웃
- `REQ-FUN-009`: **배경색 설정**: 위젯의 배경색을 외부 인수를 통해 지정할 수 있어야 합니다.
- `REQ-FUN-010`: **배경 투명도**: 배경색은 투명도(alpha) 값을 포함하여, 투명한 배경 설정이 가능해야 합니다.  디폴트 값은 완전 투명이다.
- `REQ-FUN-011`: **내부 여백**: 텍스트 편집 영역의 상/하, 좌/우 여백(padding)을 외부 인수를 통해 설정할 수 있어야 합니다.


### 2.5. 데이터 관리
- `REQ-FUN-012`: **JSON 데이터 형식**: 편집된 모든 텍스트의 내용과 스타일 정보는 JSON 형식의 문자열로 직렬화(serialize)되어야 합니다.
- `REQ-FUN-013`: **외부 컨트롤러**: 외부에서 주입된 `Controller` 객체를 통해 위젯의 현재 상태(JSON 데이터)를 조회하거나, 외부에서 데이터를 설정하여 위젯의 내용을 변경할 수 있어야 합니다.

---

## 3. 비기능 요구사항

- `REQ-NFN-001`: **플랫폼**: Flutter 프레임워크를 사용하여 구현해야 합니다.
- `REQ-NFN-002`: **재사용성**: 다른 프로젝트에서 쉽게 가져다 사용할 수 있도록 모듈화된 위젯으로 개발되어야 합니다.
- `REQ-NFN-003`: **상태 관리**: 위젯의 상태는 `Controller`를 통해 관리되어야 하며, 위젯 자체는 상태를 최소한으로 소유해야 합니다. (StatelessWidget 또는 그에 준하는 구조 고려)
- `REQ-NFN-004`: **플랫폼**: 이 위젯은  Web, Android, IOS 에서 사용이 가능해야 한다.

---

## 4. 데이터 구조 (예시)

`Controller`를 통해 외부에 노출될 JSON 데이터는 다음과 같은 구조를 가질 수 있습니다. 이는 각 텍스트 조각(span)의 내용과 스타일 정보를 담는 배열 형태가 될 것입니다.

```json
{
  "document": {
    "version": "1.0",
    "spans": [
      {
        "text": "이것은 ",
        "attributes": {
          "font": "NanumGothic",
          "size": 16,
          "color": "#000000",
          "bold": false,
          "italic": false,
          "underline": false
        }
      },
      {
        "text": "리치 텍스트",
        "attributes": {
          "font": "NanumMyeongjo",
          "size": 24,
          "color": "#FF5733",
          "bold": true,
          "italic": false,
          "underline": true
        }
      },
      {
        "text": " 에디터입니다.",
        "attributes": {
          "font": "NanumGothic",
          "size": 16,
          "color": "#000000",
          "bold": false,
          "italic": true,
          "underline": false
        }
      }
    ]
  }
}
``` 